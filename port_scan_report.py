from scapy.all import *
import sys
def generate_pdf(pdfname,tex):
	"""
	Genertates the pdf from string
	"""
	import subprocess
	import os
	import tempfile
	import shutil

	current = os.getcwd()
	temp = tempfile.mkdtemp()
	os.chdir(temp)

	f = open('cover.tex','w')
	f.write(tex)
	f.close()

	proc=subprocess.Popen(['pdflatex','cover.tex'])
	subprocess.Popen(['pdflatex',tex])
	proc.communicate()

	os.rename('cover.pdf',pdfname)
	shutil.copy(pdfname,current)
	shutil.rmtree(temp)
content=r'''\documentclass{article}
\begin{document}
\begin{figure}[t]
	%s
\end{figure}
\end{document}
''' # this needs to be fixed because output looks ugly when table is bigger than 30 rows
document = report_ports("192.168.0.1",(0,30))
document = document.translate(None, '_')
generate_pdf("report",content%document)
